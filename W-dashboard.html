<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Hirewale · Worker Dashboard</title>
  <style>
    :root{
      --brand-600:#0ea5e9;
      --brand-700:#0284c7;
      --brand-success:#16a34a;
      --brand-danger:#dc2626;
      --ink:#0f172a;
      --muted:#64748b;
      --bg:#f8fafc;
      --card-bg:#ffffff;
    }
    *{box-sizing:border-box; margin:0; padding:0; font-family:Poppins,system-ui,-apple-system,Segoe UI,Roboto;}
    body{
      min-height:100vh; background: radial-gradient(1200px 600px at 10% 10%, #e0f2fe 0%, transparent 60%),
                        radial-gradient(1000px 500px at 90% 20%, #bae6fd 0%, transparent 60%),
                        linear-gradient(180deg, #f0f9ff 0%, #ffffff 40%, #f8fafc 100%);
      color:var(--ink); display:flex; justify-content:center; padding:32px 0;
    }
    .dashboard{width:min(100%,960px); display:grid; gap:24px;}
    .card{background:var(--card-bg); border-radius:16px; padding:20px; box-shadow:0 6px 16px rgba(0,0,0,0.08);}
    .profile{display:flex; align-items:center; gap:16px; justify-content:space-between;}
    .profile-left{display:flex; align-items:center; gap:16px;}
    .profile img{width:80px; height:80px; border-radius:50%; object-fit:cover;}
    .profile-details{display:flex; flex-direction:column; gap:4px;}
    .profile-details p{font-size:14px; color:var(--ink);}
    .profile-actions{display:flex; gap:12px;}
    .profile-actions button{padding:8px 16px; border:none; border-radius:8px; cursor:pointer; font-weight:600; transition:0.3s;}
    .logout-btn{background:var(--brand-600); color:white;}
    .logout-btn:hover{background:var(--brand-700);}
    .availability-btn{color:white; margin-top: 10px; padding:8px 16px; border:none; border-radius:8px; cursor:pointer; font-weight:600; transition:0.3s;}
    .wallet{display:flex; gap:24px; justify-content:start; font-size:14px;}
    .wallet div{background:#f1f5f9; padding:12px 16px; border-radius:12px; font-weight:600; color:var(--brand-600);}
    .actions{display:flex; gap:16px; flex-wrap:wrap;}
    .actions button{flex:1 1 180px; padding:16px; background:var(--brand-600); color:white; border:none; border-radius:12px; cursor:pointer; font-weight:600; transition:0.3s;}
    .actions button:hover{background:var(--brand-700);}
    .notifications p{background:#f1f5f9; padding:12px; border-radius:12px; margin-bottom:8px; color:var(--ink); font-size:13px;}
    h2{font-size:18px; margin-bottom:12px;}
    /* Modal */
    #logoutModal{display:none; position:fixed; top:0; left:0; width:100%; height:100%; 
     background:rgba(0,0,0,0.5); justify-content:center; align-items:center; z-index:1000;}
    #logoutModal .modal-content{background:white; padding:24px; border-radius:16px; max-width:360px; text-align:center;}
    #logoutModal .modal-content button{padding:8px 16px; border:none; border-radius:8px; cursor:pointer; font-weight:600; transition:0.3s;}
    #logoutModal .modal-content .confirm{background:var(--brand-danger); color:white;}
    #logoutModal .modal-content .confirm:hover{background:#b91c1c;}
    #logoutModal .modal-content .cancel{background:var(--brand-600); color:white;}
    #logoutModal .modal-content .cancel:hover{background:var(--brand-700);}

    /* Jobs View */
    .tabs{display:flex; gap:10px; margin-bottom:16px;}
    .tab{flex:1; padding:10px; text-align:center; border-radius:8px; background:#e2e8f0; cursor:pointer; font-weight:600;}
    .tab.active{background:var(--brand-600); color:white;}
    .job-card{background:#f1f5f9; border-radius:12px; padding:16px; margin-bottom:16px; display:flex; justify-content:space-between; align-items:center; gap:16px;}
    .job-info{flex:1;}
    .job-title{font-weight:600; font-size:16px; margin-bottom:6px;}
    .job-meta{font-size:13px; color:var(--muted);}
    .job-actions{display:flex; gap:10px;}
    .job-actions button{padding:8px 14px; border:none; border-radius:8px; cursor:pointer; font-weight:600; transition:0.3s;}
    .accept{background:var(--brand-success); color:white;}
    .accept:hover{background:#15803d;}
    .reject{background:var(--brand-danger); color:white;}
    .reject:hover{background:#b91c1c;}
    .done{background:var(--brand-success); color:white;}
    .done:hover{background:#15803d;}
    .back-btn{padding:8px 16px; background:var(--brand-600); color:white; border:none; border-radius:8px; font-weight:600; cursor:pointer; transition:0.3s;}
    .back-btn:hover{background:var(--brand-700);}
  </style>
</head>
<body>
  <div class="dashboard">

    <!-- DASHBOARD MAIN -->
    <div id="mainDashboard">
      <!-- Profile Card -->
      <div class="card profile">
        <div class="profile-left">
          <img src="https://via.placeholder.com/80" alt="Profile Photo" id="profilePic">
          <div class="profile-details">
            <p><strong id="workerName">John Doe</strong></p>
            <p id="workerService">Electrician</p>
            <p id="workerLocation">Mangalore, Karnataka</p>
            <button id="toggleAvailability" class="availability-btn">Mark Unavailable</button>
          </div>
        </div>
        <div class="profile-actions">
          <button id="logoutBtn" class="logout-btn">Logout</button>
        </div>
      </div>

      <!-- Wallet -->
      <div class="card wallet">
        <div>Total Earnings: ₹<span id="earnings">0</span></div>
        <div>Referrals: <span id="referrals">0</span></div>
      </div>

      <!-- Quick Actions -->
      <div class="card actions">
        <button onclick="showJobs()">View Jobs</button>
        <button>Job History</button>
        <button>Withdraw</button>
        <button>Settings</button>
      </div>

      <!-- Notifications -->
      <div class="card notifications">
        <h2>Notifications</h2>
        <p>No new notifications</p>
      </div>
    </div>

    <!-- JOBS VIEW -->
    <div id="jobsView" class="card" style="display:none;">
      <h2>Jobs</h2>
      <div class="tabs">
        <div class="tab active" onclick="switchTab('requests')">Requests</div>
        <div class="tab" onclick="switchTab('pending')">Pending</div>
        <div class="tab" onclick="switchTab('completed')">Completed</div>
      </div>
      <div id="jobList"></div>
      <button class="back-btn" onclick="goBack()">⬅ Back to Dashboard</button>
    </div>
  </div>

  <!-- Logout Modal -->
  <div id="logoutModal" class="flex">
    <div class="modal-content">
      <p style="margin-bottom: 20px;">Are you sure you want to logout?</p>
      <div style="display:flex; justify-content:center; gap: 16px;">
        <button id="confirmLogout" class="confirm">Logout</button>
        <button id="cancelLogout" class="cancel">Cancel</button>
      </div>
    </div>
  </div>

  <script>
    // Load worker data
    const workerData = JSON.parse(sessionStorage.getItem('workerData')) || {};
    if(workerData.fullName) document.getElementById('workerName').textContent = workerData.fullName;
    if(workerData.serviceCategory) document.getElementById('workerService').textContent = workerData.serviceCategory;
    if(workerData.city && workerData.area) document.getElementById('workerLocation').textContent = `${workerData.city}, ${workerData.area}`;

    // Availability
    const toggleBtn = document.getElementById('toggleAvailability');
    let available = true;
    toggleBtn.style.background = "#16a34a";
    toggleBtn.addEventListener('click', () => {
      available = !available;
      toggleBtn.textContent = available ? "Mark Unavailable" : "Mark Available";
      toggleBtn.style.background = available ? "#16a34a" : "#dc2626";
    });

    // Logout modal
    const logoutBtn = document.getElementById('logoutBtn');
    const logoutModal = document.getElementById('logoutModal');
    document.getElementById('cancelLogout').addEventListener('click', ()=> logoutModal.style.display="none");
    document.getElementById('confirmLogout').addEventListener('click', ()=>{sessionStorage.clear(); window.location.href="index.html";});
    logoutBtn.addEventListener('click', ()=> logoutModal.style.display="flex");

    // Jobs Data
    let requests = [
      {id:1, title:"Fix Water Leakage", location:"ABC Street", pay:"₹500", time:"2h ago"},
      {id:2, title:"Install Ceiling Fan", location:"XYZ Building", pay:"₹400", time:"4h ago"}
    ];
    let pending = [{id:3, title:"Electrical Repair", location:"LMN Apartments", pay:"₹600", time:"1d ago"}];
    let completed = [];

    const mainDashboard = document.getElementById('mainDashboard');
    const jobsView = document.getElementById('jobsView');
    const jobList = document.getElementById('jobList');
    const tabs = document.querySelectorAll('.tab');

    function showJobs(){
      mainDashboard.style.display="none";
      jobsView.style.display="block";
      switchTab('requests');
    }

    function goBack(){
      jobsView.style.display="none";
      mainDashboard.style.display="grid";
    }

    function switchTab(type){
      tabs.forEach(tab => tab.classList.remove('active'));
      document.querySelector(`.tab[onclick="switchTab('${type}')"]`).classList.add('active');

      jobList.innerHTML="";
      let jobs = (type==="requests")? requests : (type==="pending")? pending : completed;
      if(jobs.length===0){ jobList.innerHTML="<p style='color:var(--muted)'>No jobs found.</p>"; return; }

      jobs.forEach(job=>{
        const div=document.createElement('div');
        div.className='job-card';
        div.innerHTML=`
          <div class="job-info">
            <div class="job-title">${job.title}</div>
            <div class="job-meta">${job.location} • ${job.pay} • ${job.time}</div>
          </div>
          <div class="job-actions"></div>
        `;
        const actions=div.querySelector('.job-actions');
        if(type==="requests"){
          actions.innerHTML=`<button class="accept">Accept</button><button class="reject">Reject</button>`;
          actions.querySelector('.accept').onclick=()=>{pending.push(job);requests=requests.filter(j=>j.id!==job.id);switchTab('requests');};
          actions.querySelector('.reject').onclick=()=>{requests=requests.filter(j=>j.id!==job.id);switchTab('requests');};
        } else if(type==="pending"){
          actions.innerHTML=`<button class="done">Mark as Done</button>`;
          actions.querySelector('.done').onclick=()=>{completed.push(job);pending=pending.filter(j=>j.id!==job.id);switchTab('pending');};
        }
        jobList.appendChild(div);
      });
    }
  </script>
</body>

</html>
