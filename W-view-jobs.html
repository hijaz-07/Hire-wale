<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Hirewale ¬∑ View Jobs</title>
  <style>
    :root{
      --brand-600:#0ea5e9;
      --brand-700:#0284c7;
      --brand-success:#16a34a;
      --brand-danger:#dc2626;
      --ink:#0f172a;
      --card-bg:#ffffff;
    }
    *{box-sizing:border-box;margin:0;padding:0;font-family:Poppins,system-ui,-apple-system,Segoe UI,Roboto;}
    body{
      min-height:100vh;
      background:
        radial-gradient(1200px 600px at 10% 10%, #e0f2fe 0%, transparent 60%),
        radial-gradient(1000px 500px at 90% 20%, #bae6fd 0%, transparent 60%),
        linear-gradient(180deg, #f0f9ff 0%, #ffffff 40%, #f8fafc 100%);
      color:var(--ink);
      display:flex;
      justify-content:center;
      padding:32px 0;
    }
    .dashboard{width:min(100%,960px);display:grid;gap:24px;padding:0 16px;}
    .card{background:var(--card-bg);border-radius:16px;padding:20px;box-shadow:0 6px 16px rgba(0,0,0,0.08);}
    h2{font-size:20px;margin-bottom:16px;}
    .job-card{
      border:1px solid #e2e8f0;
      border-radius:12px;
      padding:16px;
      margin-bottom:16px;
      box-shadow:0 3px 8px rgba(0,0,0,0.05);
      display:flex;
      flex-direction:column;
      gap:8px;
    }
    .job-title{font-weight:600;font-size:16px;}
    .job-details{font-size:14px;color:#334155;}
    .actions{display:flex;gap:12px;margin-top:8px;}
    .btn{
      padding:10px 16px;
      border:none;
      border-radius:8px;
      cursor:pointer;
      font-weight:600;
      transition:transform 0.2s ease, box-shadow 0.2s ease, background 0.2s ease;
      color:white;
    }
    .btn:hover{
      transform:translateY(-2px) scale(1.03);
      box-shadow:0 4px 12px rgba(0,0,0,0.15);
    }
    .accept{background:var(--brand-success);}
    .accept:hover{background:#15803d;}
    .reject{background:var(--brand-danger);}
    .reject:hover{background:#b91c1c;}
    .back-btn{background:var(--brand-600);}
    .back-btn:hover{background:var(--brand-700);}
    /* Modal */
    .modal-overlay{
      display:none;
      position:fixed;
      top:0; left:0;
      width:100%; height:100%;
      background:rgba(0,0,0,0.5);
      justify-content:center;
      align-items:center;
      z-index:1000;
    }
    .modal-content{
      background:white;
      padding:24px;
      border-radius:16px;
      max-width:360px;
      text-align:center;
      animation:bounceIn 0.45s ease;
    }
    @keyframes bounceIn {
      0% { opacity: 0; transform: scale(0.8); }
      60% { opacity: 1; transform: scale(1.05); }
      80% { transform: scale(0.95); }
      100% { transform: scale(1); }
    }
    .modal-content .confirm{background:var(--brand-success);color:white;padding:8px 16px;border-radius:8px;border:none;cursor:pointer;}
    .modal-content .cancel{background:var(--brand-danger);color:white;padding:8px 16px;border-radius:8px;border:none;cursor:pointer;margin-left:8px;}
  </style>
</head>
<body>
  <div class="dashboard">
    <div class="card">
      <h2>Available Jobs</h2>
      <div id="jobList"></div>
      <button class="btn back-btn" onclick="window.location.href='W-dashboard.html'">‚¨Ö Back to Dashboard</button>
    </div>
  </div>

  <!-- Modal -->
  <div id="actionModal" class="modal-overlay">
    <div class="modal-content">
      <p id="modalMessage" style="margin-bottom:20px;"></p>
      <div style="display:flex;justify-content:center;">
        <button id="confirmAction" class="confirm">Confirm</button>
        <button id="cancelAction" class="cancel">Cancel</button>
      </div>
    </div>
  </div>

  <script>
    // Load jobs from sessionStorage or create defaults
    let jobs = JSON.parse(sessionStorage.getItem("jobs")) || [
      {id:1, title:"Fix kitchen wiring", location:"Mangalore", pay:500, status:"pending"},
      {id:2, title:"Install ceiling fan", location:"Udupi", pay:400, status:"pending"},
      {id:3, title:"Repair water heater", location:"Mangalore", pay:600, status:"pending"}
    ];
    sessionStorage.setItem("jobs", JSON.stringify(jobs));

    const jobList = document.getElementById("jobList");
    const modal = document.getElementById("actionModal");
    const modalMsg = document.getElementById("modalMessage");
    const confirmBtn = document.getElementById("confirmAction");
    const cancelBtn = document.getElementById("cancelAction");

    let selectedJob = null;
    let selectedAction = null;

    function renderJobs() {
      jobList.innerHTML = "";
      const pendingJobs = jobs.filter(j => j.status === "pending");
      if (pendingJobs.length === 0) {
        jobList.innerHTML = "<p>No new jobs available.</p>";
        return;
      }
      pendingJobs.forEach(job => {
        const div = document.createElement("div");
        div.className = "job-card";
        div.innerHTML = `
          <div class="job-title">${job.title}</div>
          <div class="job-details">üìç ${job.location}</div>
          <div class="job-details">üí∞ ‚Çπ${job.pay}</div>
          <div class="actions">
            <button class="btn accept" onclick="openModal(${job.id}, 'accept')">Accept</button>
            <button class="btn reject" onclick="openModal(${job.id}, 'reject')">Reject</button>
          </div>
        `;
        jobList.appendChild(div);
      });
    }

    function openModal(jobId, action) {
      selectedJob = jobs.find(j => j.id === jobId);
      selectedAction = action;
      modalMsg.textContent = `Are you sure you want to ${action} "${selectedJob.title}"?`;
      modal.style.display = "flex";
    }

    cancelBtn.addEventListener("click", () => {
      modal.style.display = "none";
      selectedJob = null;
      selectedAction = null;
    });

    confirmBtn.addEventListener("click", () => {
      if (selectedJob && selectedAction) {
        if (selectedAction === "accept") {
          selectedJob.status = "accepted";
          addNotification(`‚úÖ Accepted job: ${selectedJob.title}`, "success");
        } else {
          selectedJob.status = "rejected";
          addNotification(`‚ùå Rejected job: ${selectedJob.title}`, "danger");
        }
        sessionStorage.setItem("jobs", JSON.stringify(jobs));
        renderJobs();
      }
      modal.style.display = "none";
    });

    // Notifications persistence
    function addNotification(message, type="info") {
      const saved = JSON.parse(sessionStorage.getItem("notifications")) || [];
      saved.unshift({message, type, time: Date.now()});
      sessionStorage.setItem("notifications", JSON.stringify(saved));
    }

    renderJobs();
  </script>
</body>
</html>
